---
title: "Analisis Data Eksploratif (EDA) Dataset Lending Club"
author: "Muhammad Azizul Hakim"
date: "7/13/2019"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## 1. Overview Data

Sebelum memulai analisis data, sebaiknya kita lihat gambaran umum dari dataset yang kita miliki, untuk memberikan gambaran mengenai analisis yang akan kita lakukan selanjutnya.

Load dataset, dan tampilkan 5 observasi teratas:

```{r load data lending_club}
loan <- readRDS("lending_club_loan_data.rds")

head(loan, n=5)
```

Tampilkan seluruh nama kolom yang ada:
```{r column names}
colnames(loan)
```
Struktur data:
```{r data structure}
str(loan)
```
Buat summary statistik data secara umum:
```{r summary}
summary(loan)
```
## 2. Analisis Data Eksploratif (EDA)

### Status Pinjaman (loan_status)
```{r ggplot loan_status}
library(dplyr)
library(ggplot2)

loan %>%
  count(loan_status) %>%
  ggplot(aes(x=reorder(loan_status, desc(n)), y=n, fill=n)) +
  geom_col() +
  coord_flip() +
  labs(x="Loan Status", y="Count")
```
Untuk lebih memperjelas hasil analisis distribusi, diplotkan pula frekuensi loan_status dalam satuan %:
```{r desctools loan_status}
library(DescTools)

Desc(loan$loan_status, main="Loan Status Distribution", plotit = TRUE)
```



### Jumlah Pinjaman (loan_amnt)

Berikut ini adalah visualisasi loan_amnt menggunakan density plot, box plot, dan empirical distribution function plot:
```{r desctools loan_amnt}
Desc(loan$loan_amnt, main="Loan Amount Distribution", plotit=TRUE)
```
Dengan pertumbuhan jumlah pinjaman terhadap waktu sebagai berikut:
```{r loan_amnt vs issue_d (time series)}
loan$issue_d <- as.Date(gsub("^", "01-", loan$issue_d), format="%d-%b-%Y")

loan_amnt_df <- loan %>% 
  select(issue_d, loan_amnt) %>% 
  group_by(issue_d) %>% 
  summarise(Amount = sum(loan_amnt))

loan_amnt_ts <- ggplot(loan_amnt_df, 
                  aes(x = issue_d, y = Amount))
loan_amnt_ts + geom_line() + xlab("Date issued")
```
Distribusi jumlah pinjaman terhadap status pinjaman:
```{r ggplot jumlah pinjaman terhadap status pinjaman}
box_status <- ggplot(loan, aes(loan_status, loan_amnt))
box_status + geom_boxplot(aes(fill = loan_status)) +
  theme(axis.text.x = element_blank()) +
  labs(list(
    title = "Loan Amount by Status",
    x = "Status",
    y = "Amount"))  
```
Dengan pertumbuhan jumlah pinjaman terhadap waktu, apabila dikelompokkan berdasarkan grade, sebagai berikut:
```{r loan_amnt time series by grade}
loan_amnt_df_grade <- loan %>% 
  select(issue_d, loan_amnt, grade) %>% 
  group_by(issue_d, grade) %>% 
  summarise(Amount = sum(loan_amnt))

loan_amnt_ts_grade <- ggplot(loan_amnt_df_grade, 
                  aes(x = issue_d, y = Amount))
loan_amnt_ts_grade + geom_area(aes(fill=grade)) + xlab("Date issued")
```

